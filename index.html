<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unique Bags</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Tajawal:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- تمت إضافة مكتبة Supabase هنا -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --primary-bg: #FFFBF7;
            --secondary-bg: #F5EBEB;
            --primary-text: #4B4242;
            --header-bg: #FFFFFF;
            --accent-color: #B0888E;
            --highlight-color: #D4A3A9;
            --success-color: #5A8B72;
            --danger-color: #C97C7C;
            --danger-hover-color: #b96b6b;
        }

        body {
            font-family: 'Poppins', 'Tajawal', sans-serif;
            background-color: var(--primary-bg);
            color: var(--primary-text);
        }

        ::-webkit-scrollbar {
            display: none;
        }

        body {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        body[dir="rtl"] {
            font-family: 'Tajawal', sans-serif;
        }

        .hidden {
            display: none !important;
        }

        header {
            background-color: var(--header-bg);
            border-bottom: 1px solid var(--secondary-bg);
        }

        .modal {
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: var(--primary-bg);
        }

        .modal-content-scrollable {
            max-height: 85vh;
            overflow-y: auto;
        }

        body:not(.admin-mode) .admin-only,
        body:not(.admin-mode) .admin-only-block {
            display: none;
        }

        body.admin-mode .admin-only {
            display: flex;
        }

        body.admin-mode .admin-only-block {
            display: block;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
            transition: background-color 0.3s;
            font-weight: 600;
        }

        .btn-primary:hover {
            background-color: var(--highlight-color);
        }

        .btn-primary.added {
            background-color: var(--success-color);
            animation: vibrate 0.3s linear;
        }

        .btn-secondary {
            background-color: #D3C5C5;
            color: var(--primary-text);
            transition: background-color 0.3s;
            font-weight: 600;
        }

        .btn-secondary:hover {
            background-color: #c3b5b5;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
            transition: background-color 0.3s;
        }

        .btn-danger:hover {
            background-color: var(--danger-hover-color);
        }

        .nav-link {
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 60px;
            color: #8A7F7F;
        }

        .nav-link:hover:not(.active) {
            background-color: var(--secondary-bg);
            color: var(--accent-color);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background-color: var(--accent-color);
            color: white;
        }

        #admin-mode-btn.active {
            background-color: var(--success-color);
            color: white;
        }

        /* حاوية الأيقونة للسماح بالأنيميشن */
        .icon-wrapper {
            width: 1.7rem;
            height: 1.7rem;
            margin-bottom: 2px;
            position: relative;
        }

        .nav-link .nav-text-label {
            font-size: 0.65rem;
            line-height: 1;
            white-space: nowrap;
            font-weight: 600;
        }

        .nav-selling-wrapper {
            position: relative;
        }

        #cart-item-count {
            position: absolute;
            top: -5px;
            right: -8px;
            background-color: var(--danger-color);
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            border-radius: 9999px;
            height: 20px;
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--header-bg);
        }

        .category-tab {
            padding: 8px 16px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            font-weight: 600;
            color: #A09393;
        }

        .category-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .sale-card-selected {
            background-color: var(--secondary-bg) !important;
            border: 1px solid var(--highlight-color);
        }

        input,
        select {
            background-color: #FDF6F6;
            border: 1px solid #EAE0E0;
            color: var(--primary-text);
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--highlight-color);
            box-shadow: 0 0 0 2px rgba(212, 163, 169, 0.3);
        }

        .payment-method-btn {
            background-color: var(--secondary-bg);
            border: 2px solid #EAE0E0;
            transition: all 0.2s ease-in-out;
            font-weight: 600;
        }

        .payment-method-btn.selected,
        .payment-method-btn:hover {
            background-color: var(--primary-bg);
            border-color: var(--highlight-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            color: var(--accent-color);
        }

        .receipt-tab {
            position: relative;
            padding: 0.5rem;
            cursor: pointer;
            background-color: var(--secondary-bg);
            border: 1px solid #EAE0E0;
            border-bottom: none;
            border-radius: 0.5rem 0.5rem 0 0;
            margin-right: 2px;
            transition: all 0.2s ease-in-out;
            transform-origin: bottom left;
        }

        .receipt-tab.active {
            background-color: var(--primary-bg);
            color: var(--accent-color);
            border-top: 3px solid var(--accent-color);
            transform: translateY(2px) scale(1);
        }

        .receipt-tab:not(.active) {
            transform: scale(0.7);
        }

        .receipt-tab:not(.active):hover {
            transform: scale(1);
        }

        .receipt-tab .tab-content {
            display: flex;
            align-items: center;
        }

        .receipt-tab:not(.active) .tab-full-text {
            display: none;
        }

        .receipt-tab:not(.active):hover .tab-full-text {
            display: inline;
        }

        .receipt-tab:not(.active):hover .tab-short-text {
            display: none;
        }

        .receipt-tab .close-receipt-btn {
            margin-left: 0.5rem;
            padding: 0.1rem;
            border-radius: 9999px;
            display: none;
        }

        .receipt-tab.active .close-receipt-btn,
        .receipt-tab:hover .close-receipt-btn {
            display: inline-block;
        }

        .receipt-tab .close-receipt-btn:hover {
            background-color: var(--danger-color);
            color: white;
        }

        #add-receipt-btn {
            background-color: transparent;
            border: 2px dashed #D3C5C5;
            color: #A09393;
            transition: all 0.2s ease-in-out;
        }

        #add-receipt-btn:hover {
            background-color: var(--secondary-bg);
            color: var(--accent-color);
        }

        .color-swatch {
            width: 24px;
            height: 24px;
            border-radius: 9999px;
            border: 2px solid #EAE0E0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-swatch.active {
            border-color: var(--accent-color);
            transform: scale(1.1);
        }

        .color-swatch:hover:not(.active) {
            border-color: var(--highlight-color);
        }

        .product-card {
            background-color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .product-card-image-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1;
            margin-bottom: 1rem;
        }

        .product-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.7s;
            transform-style: preserve-3d;
        }

        .product-card:hover .product-card-inner {
            transform: rotateY(180deg);
        }

        .product-card-front,
        .product-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .product-card-back {
            transform: rotateY(180deg);
        }

        .product-card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.375rem;
        }

        @keyframes vibrate {
            0% {
                transform: translate(0);
            }

            20% {
                transform: translate(-1px, 1px);
            }

            40% {
                transform: translate(-1px, -1px);
            }

            60% {
                transform: translate(1px, 1px);
            }

            80% {
                transform: translate(1px, -1px);
            }

            100% {
                transform: translate(0);
            }
        }
    </style>
</head>

<body class="antialiased">

    <header class="p-4 flex justify-between items-center sticky top-0 z-40">
        <div class="flex-1 flex justify-start">
            <div id="home-btn" class="flex items-center space-x-3 cursor-pointer">
                <img id="header-logo" src="build/logo.png" alt="Unique Bags Logo" class="h-11 w-11">
                <span class="text-2xl font-bold" style="color: var(--primary-text);">Unique Bags</span>
            </div>
        </div>

        <nav class="flex-shrink-0 flex items-center justify-center space-x-1 md:space-x-2">
            <button id="nav-home" class="nav-link active" data-page="home-page" title="Home">
                <div class="icon-wrapper">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navHome">Home</span>
            </button>

            <!-- ======================================================== -->
            <!-- أيقونة المخزن الجديدة بشكل صندوق مع غطاء متحرك -->
            <!-- ======================================================== -->
            <button id="nav-inventory" class="nav-link admin-only" data-page="inventory-page" title="Inventory">
                <div class="icon-wrapper">
                    <!-- الحالة 1: الصندوق مغلق (يظهر افتراضياً) -->
                    <svg class="icon-state icon-closed" fill="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M2,8.5L12,13.5L22,8.5L12,3.5L2,8.5Z M12,14.5L2,9.5V15.5L12,20.5L22,15.5V9.5L12,14.5Z" />
                    </svg>
                    <!-- الحالة 2: الصندوق مفتوح (يظهر عند مرور الماوس) -->
                    <svg class="icon-state icon-open" fill="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <!-- الغطاء المفتوح: تم رفعه وتدويره قليلاً -->
                        <path d="M2,8.5L12,3.5L22,8.5L12,13.5L2,8.5Z" transform="translate(0, -2) rotate(-15 12 8.5)" />
                        <!-- قاعدة الصندوق -->
                        <path d="M12,14.5L2,9.5V15.5L12,20.5L22,15.5V9.5L12,14.5Z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navInventory">Inventory</span>
            </button>
            <!-- ======================================================== -->
            <!-- نهاية أيقونة المخزن الجديدة -->
            <!-- ======================================================== -->


            <button id="nav-selling" class="nav-link" data-page="selling-page" title="Selling">
                <div class="nav-selling-wrapper icon-wrapper">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                    </svg>
                    <span id="cart-item-count" class="hidden">0</span>
                </div>
                <span class="nav-text-label" data-lang-key="navSelling">Selling</span>
            </button>

            <!-- ======================================================== -->
            <!-- أيقونة الحجز الجديدة (تم تحديثها لتتوافق مع الأنيميشن) -->
            <!-- ======================================================== -->
            <button id="nav-booking" class="nav-link" data-page="booking-page" title="Booking">
                <div class="icon-wrapper">
                    <!-- الحالة 1: أيقونة التقويم العادية -->
                    <svg class="icon-state icon-closed" fill="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M19,4H18V2H16V4H8V2H6V4H5A2,2 0 0,0 3,6V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V6A2,2 0 0,0 19,4M19,20H5V10H19V20M19,8H5V6H19V8Z" />
                    </svg>
                    <!-- الحالة 2: أيقونة التقويم مع علامة حجز (تظهر عند المرور) -->
                    <svg class="icon-state icon-open" fill="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7v-5z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navBooking">Booking</span>
            </button>
            <!-- ======================================================== -->
            <!-- نهاية أيقونة الحجز الجديدة -->
            <!-- ======================================================== -->

            <button id="nav-history" class="nav-link admin-only" data-page="history-page" title="History">
                <div class="icon-wrapper">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7v2c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.75-1.23-3.5-2.07V8H12z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navHistory">History</span>
            </button>
            <button id="nav-salaries" class="nav-link admin-only" data-page="salaries-page" title="Salaries">
                <div class="icon-wrapper">
                    <svg class="icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navSalaries">Salaries</span>
            </button>
            <button id="nav-customers" class="nav-link admin-only" data-page="customers-page" title="Customers">
                <div class="icon-wrapper">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navCustomers">Customers</span>
            </button>
            <button id="nav-about" class="nav-link" data-page="about-page" title="About">
                <div class="icon-wrapper">
                    <svg class="icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navAbout">About</span>
            </button>
            <button id="admin-mode-btn" class="nav-link">
                <div class="icon-wrapper">
                    <svg class="icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" />
                    </svg>
                </div>
                <span class="nav-text-label" data-lang-key="navAdminMode">Admin</span>
            </button>
        </nav>

        <div class="flex-1 flex justify-end items-center space-x-2">
            <button id="lang-switcher" class="nav-link" title="Switch Language">
                <div class="icon-wrapper">
                    <svg class="icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 00-1.38-3.39A8.04 8.04 0 0118.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.39A7.99 7.99 0 015.08 16zm2.95-8H5.08a7.99 7.99 0 014.21-3.39c-.6 1.05-1.06 2.14-1.38 3.39zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2zm.25 5.39c.6-1.05 1.06-2.14 1.38-3.39h2.95a8.04 8.04 0 01-4.33 3.39zM16.38 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z" />
                    </svg>
                </div>
                <span id="lang-switcher-text" class="nav-text-label"></span>
            </button>
            <button id="logout-btn" class="nav-link" title="Logout">
                <div class="icon-wrapper">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M14 8V6C14 4.89543 13.1046 4 12 4H8C6.89543 4 6 4.89543 6 6V18C6 19.1046 6.89543 20 8 20H12C13.1046 20 14 19.1046 14 18V16"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M10 12H20M20 12L17 9M20 12L17 15" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
            </button>
        </div>
    </header>

    <main id="app-container" class="p-4 md:p-8">
        <!-- Home Page -->
        <div id="home-page" class="page">
            <div class="flex justify-between items-center mb-4">
                <input type="text" id="product-search" class="w-full max-w-md p-2 rounded-lg"
                    data-lang-key="searchPlaceholder" placeholder="Search...">
                <div id="home-category-tabs" class="flex items-center space-x-2"></div>
            </div>
            <div id="product-gallery" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"></div>
        </div>

        <!-- Inventory Page -->
        <div id="inventory-page" class="page hidden">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold" data-lang-key="navInventory">Inventory</h1>
                <div class="flex items-center space-x-2">
                    <button id="add-product-btn" class="btn-primary py-2 px-4 rounded-lg"
                        data-lang-key="addNewProduct">Add Product</button>
                    <button id="manage-categories-btn" class="btn-secondary py-2 px-4 rounded-lg"
                        data-lang-key="manageCategories">Manage Categories</button>
                    <button id="export-inventory-btn" class="btn-secondary py-2 px-4 rounded-lg"
                        data-lang-key="exportInventory">Export Report</button>
                </div>
            </div>
            <div class="flex justify-between items-center mb-4">
                <input type="text" id="inventory-search" class="w-full max-w-md p-2 rounded-lg"
                    data-lang-key="inventorySearchPlaceholder" placeholder="Search inventory...">
                <div id="inventory-category-tabs" class="flex items-center space-x-2"></div>
            </div>
            <div class="overflow-x-auto bg-white rounded-lg shadow">
                <table id="inventory-table" class="w-full text-sm text-left">
                    <thead class="text-xs uppercase" style="background-color: var(--secondary-bg);">
                        <tr>
                            <th class="p-2" data-lang-key="colProductName">Name</th>
                            <th class="p-2" data-lang-key="colProductCode">Code</th>
                            <th class="p-2" data-lang-key="colCategory">Category</th>
                            <th class="p-2" data-lang-key="colImage">Image</th>
                            <th class="p-2" data-lang-key="colQuantity">Quantity</th>
                            <th class="p-2" data-lang-key="colPurchasePrice">Purchase Price</th>
                            <th class="p-2" data-lang-key="colSellingPrice">Selling Price</th>
                            <th class="p-2" data-lang-key="colColors">Colors</th>
                            <th class="p-2" data-lang-key="colActions">Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Selling Page -->
        <div id="selling-page" class="page hidden">
            <div id="receipt-tabs-container" class="flex items-end -mb-px"></div>
            <div id="active-receipt-content" class="p-6 rounded-b-lg rounded-r-lg"
                style="background-color: var(--primary-bg); border: 1px solid #EAE0E0;"></div>
        </div>

        <!-- Booking Page -->
        <div id="booking-page" class="page hidden">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold" data-lang-key="openBookings">Open Bookings</h1>
                <input type="text" id="booking-search-input" class="w-full max-w-md p-2 rounded-lg"
                    data-lang-key="bookingSearchPlaceholder" placeholder="Search...">
            </div>
            <div id="open-bookings-list" class="space-y-4"></div>
        </div>

        <!-- History Page -->
        <div id="history-page" class="page hidden">
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <h2 class="text-2xl font-bold mb-4" data-lang-key="reports">Reports</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end" id="report-filters">
                    <div>
                        <label for="time-filter-type" class="block text-sm mb-1" data-lang-key="timeFilter">Time
                            Filter</label>
                        <select id="time-filter-type" class="w-full p-2 rounded-lg">
                            <option value="all" data-lang-key="allTime">All Time</option>
                            <option value="month" data-lang-key="byMonth">By Month</option>
                            <option value="day" data-lang-key="byDay">By Day</option>
                        </select>
                    </div>
                    <div id="month-filter-container" class="hidden">
                        <label for="report-month-picker" class="block text-sm mb-1" data-lang-key="selectMonth">Select
                            Month</label>
                        <input type="month" id="report-month-picker" class="w-full p-2 rounded-lg">
                    </div>
                    <div id="day-filter-container" class="hidden">
                        <label for="report-day-picker" class="block text-sm mb-1" data-lang-key="selectDay">Select
                            Day</label>
                        <input type="date" id="report-day-picker" class="w-full p-2 rounded-lg">
                    </div>
                    <div>
                        <label for="user-filter" class="block text-sm mb-1" data-lang-key="cashier">Cashier</label>
                        <select id="user-filter" class="w-full p-2 rounded-lg">
                            <option value="all" data-lang-key="allUsers">All Users</option>
                        </select>
                    </div>
                    <div class="self-end">
                        <button id="export-pdf-btn" class="btn-secondary w-full py-2 px-4 rounded-lg"
                            data-lang-key="exportPdf">Export to PDF</button>
                    </div>
                    <div class="self-end">
                        <button id="export-returns-pdf-btn" class="btn-primary w-full py-2 px-4 rounded-lg"
                            data-lang-key="exportReturns">Export Returns to PDF</button>
                    </div>
                </div>
                <div id="report-summary"
                    class="mt-6 border-t pt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h3 class="font-bold" data-lang-key="totalRevenue">Total Revenue</h3>
                        <p id="total-revenue">0 EGP</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h3 class="font-bold" data-lang-key="totalProfit">Total Profit</h3>
                        <p id="total-profit">0 EGP</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h3 class="font-bold" data-lang-key="totalCashSales">Total Cash Sales</h3>
                        <p id="total-cash-sales">0 EGP</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h3 class="font-bold" data-lang-key="totalItemsSold">Total Items Sold</h3>
                        <p id="total-items-sold">0</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h3 class="font-bold" data-lang-key="totalReturns">Total Returns</h3>
                        <p id="total-items-returned">0</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg col-span-2 lg:col-span-1">
                        <h3 class="font-bold" data-lang-key="totalReturnsValue">Total Returns Value</h3>
                        <p id="total-returns-value">0 EGP</p>
                    </div>
                </div>
            </div>
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold" data-lang-key="salesHistory">Sales History</h2>
                <input type="text" id="history-search" data-lang-key="searchReceiptsPlaceholder" placeholder="Search..."
                    class="p-2 rounded-lg">
            </div>
            <div id="selection-controls" class="flex items-center space-x-4 mb-4 hidden">
                <input type="checkbox" id="select-all-checkbox" class="h-5 w-5 rounded"><label for="select-all-checkbox"
                    data-lang-key="selectAll">Select All</label>
                <button id="delete-selected-btn" class="btn-danger py-2 px-4 rounded-lg hidden"
                    data-lang-key="deleteSelected">Delete Selected</button>
            </div>
            <div id="sales-history-list" class="space-y-4"></div>
        </div>

        <!-- Salaries Page -->
        <div id="salaries-page" class="page hidden">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold" data-lang-key="navSalaries">Salaries</h1>
                <div class="flex items-center space-x-2">
                    <input type="text" id="salaries-search-input" placeholder="Search for user..."
                        class="p-2 rounded-lg">
                    <button id="export-salaries-btn" class="btn-primary py-2 px-4 rounded-lg"
                        data-lang-key="exportExcel">Export to Excel</button>
                </div>
            </div>
            <div class="overflow-x-auto bg-white rounded-lg shadow">
                <table id="salaries-table" class="w-full text-sm text-left">
                    <thead class="text-xs uppercase" style="background-color: var(--secondary-bg);">
                        <tr>
                            <th class="p-4" data-lang-key="colUserName">User Name</th>
                            <th class="p-4" data-lang-key="colFixedSalary">Fixed Salary</th>
                            <th class="p-4" data-lang-key="colCommissionPerPiece">Commission / Piece</th>
                            <th class="p-4" data-lang-key="colBonus">Bonus</th>
                            <th class="p-4" data-lang-key="colPiecesSold">Pieces Sold</th>
                            <th class="p-4" data-lang-key="colTotalCommission">Total Commission</th>
                            <th class="p-4" data-lang-key="colTotalSalary">Total Salary</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Customers Page -->
        <div id="customers-page" class="page hidden">
            <h1 class="text-3xl font-bold mb-4" data-lang-key="customersTitle">Customers</h1>
            <div class="bg-white p-4 rounded-lg shadow mb-4 flex justify-between items-center">
                <input type="text" id="customer-search" placeholder="Search by name or phone..." class="p-2 rounded-lg">
                <button id="export-customers-btn" class="btn-primary py-2 px-4 rounded-lg"
                    data-lang-key="exportExcel">Export to Excel</button>
            </div>
            <div class="overflow-x-auto bg-white rounded-lg shadow">
                <table id="customers-table" class="w-full text-sm text-left">
                    <thead class="text-xs uppercase" style="background-color: var(--secondary-bg);">
                        <tr>
                            <th class="p-4" data-lang-key="colCustomerName">Name</th>
                            <th class="p-4" data-lang-key="colCustomerPhone">Phone</th>
                            <th class="p-4" data-lang-key="colCustomerAddress">Address</th>
                            <th class="p-4" data-lang-key="colCustomerCity">City</th>
                            <th class="p-4" data-lang-key="colTotalItems">Items Bought</th>
                            <th class="p-4" data-lang-key="colLastPurchase">Last Purchase</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- About Page -->
        <div id="about-page" class="page hidden">
            <div class="text-center">
                <h1 class="text-4xl font-bold mb-4">Unique Bags POS System</h1>
                <p class="text-lg">Version 1.0.0</p>
                <p class="mt-8">Developed by:</p>
                <p class="text-2xl font-semibold" style="color: var(--accent-color);">Omar Abdelall</p>
                <p>Email: moroplus15@gmail.com</p>
                <p>Phone: 01009715199</p>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="product-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-content modal-content-scrollable w-full max-w-2xl p-6 rounded-lg shadow-lg my-8"></div>
    </div>
    <div id="barcode-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden"></div>
    <div id="category-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-content w-full max-w-md p-6 rounded-lg shadow-lg"></div>
    </div>
    <div id="receipt-selection-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden"></div>
    <div id="return-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden"></div>
    <div id="admin-password-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-content w-full max-w-sm p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold mb-4">Admin Login</h2>
            <form id="admin-password-form">
                <label for="admin-password-input" class="block mb-2">Password</label>
                <input type="password" id="admin-password-input" class="w-full p-2 rounded-lg mb-2" required>
                <p id="admin-password-error" class="text-red-500 text-sm mb-4 hidden">Incorrect password.</p>
                <div class="flex justify-end space-x-4 mt-4">
                    <button type="button" id="cancel-admin-password-btn"
                        class="btn-secondary py-2 px-4 rounded-lg">Cancel</button>
                    <button type="submit" class="btn-primary py-2 px-4 rounded-lg">Login</button>
                </div>
            </form>
        </div>
    </div>
    <div id="booking-confirmation-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-content w-full max-w-md p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold mb-4" data-lang-key="confirmBookingTitle">Confirm Booking</h2>
            <p class="mb-4" data-lang-key="confirmBookingMsg">Please enter the deposit amount to save this cart as a
                booking.</p>
            <div id="booking-modal-summary"></div>
            <form id="booking-confirmation-form">
                <label for="booking-deposit-input" class="block mb-2 mt-4" data-lang-key="deposit">Deposit (EGP)</label>
                <input type="number" id="booking-deposit-input" class="w-full p-2 rounded-lg mb-2" required min="0"
                    step="0.01" placeholder="0.00">
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" id="cancel-booking-confirmation-btn"
                        class="btn-secondary py-2 px-4 rounded-lg" data-lang-key="btnCancel">Cancel</button>
                    <button type="submit" class="btn-primary py-2 px-4 rounded-lg" data-lang-key="saveBooking">Save
                        Booking</button>
                </div>
            </form>
        </div>
    </div>
    <div id="booking-edit-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden"></div>

    <script src="renderer.js" type="module"></script>
</body>

</html>